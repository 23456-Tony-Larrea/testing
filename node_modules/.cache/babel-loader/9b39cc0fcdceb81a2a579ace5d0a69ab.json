{"ast":null,"code":"import _regeneratorRuntime from\"D:/vinculacion/ami_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/vinculacion/ami_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/vinculacion/ami_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import\"../css/singin.css\";import{Grid,TextField,Button,Card,Container}from\"@material-ui/core\";import{useHistory}from\"react-router\";import Swal from\"sweetalert2\";//import { makeStyles } from \"@material-ui/core/styles\";\nimport SaveIcon from\"@material-ui/icons/Save\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var validateEmail=function validateEmail(values){var re=/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;if(re.test(values)){return false;}else{return true;}};function ResetPassoword(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),email=_React$useState2[0],setEmail=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var history=useHistory();var statusdisable=email.length===0||password.length===0||validateEmail(email)?true:false;var errorMessagePass=password.length===0?\"La contraseña es obligatoria\":\"\";var errorMessage=email.length===0?\"El email es obligatorio\":validateEmail(email)===true?\"El email no es válido\":\"\";var helperTextProps={error:true};function goHome(){history.push(\"/home\");}function resetpass(){return _resetpass.apply(this,arguments);}function _resetpass(){_resetpass=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data={email:email,password:password};_context.next=3;return fetch(process.env.REACT_APP_BACKEND+\"/resetpass\",{method:\"POST\",body:JSON.stringify(data),headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"}});case 3:result=_context.sent;_context.next=6;return result.json();case 6:result=_context.sent;if(result.status===200){Swal.fire({// position: \"top-end\",\nicon:\"success\",imageUrl:\"/images/alertas/ok1.png\",imageWidth:150,imageHeight:150,title:\"Felicitaciones\",text:result.message,showConfirmButton:false,width:\"22rem\",timer:2500,background:\"#E6E6FA\"// background: '#ffff url(/images/alertas/ok1.png) center no-repeat ',\n}).then(function(state){if(state.dismiss===Swal.DismissReason.timer||state.isDismissed){history.push(\"/home\");}});}else{Swal.fire({icon:\"error\",title:\"Error\",imageUrl:\"/images/alertas/error.png\",text:result.message,showConfirmButton:false,width:\"22rem\",timer:2500});}case 8:case\"end\":return _context.stop();}}},_callee);}));return _resetpass.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{style:{backgroundImage:\"url(../../images/menu/login.jpeg)\",backgroundPosition:'center',backgroundSize:'cover',backgroundRepeat:'no-repeat'},children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsx(Grid,{style:{textAlign:\"center\",minHeight:\"100vh\"},className:\"card\",item:true// xl={6}\n// sm={6}\n// xs={12}\n// md={6}\n,container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:/*#__PURE__*/_jsxs(Card,{style:{backgroundColor:\"#F9F9F9\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Actualizar Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,sm:12,children:/*#__PURE__*/_jsx(TextField,{name:\"Correo\",variant:\"outlined\",required:true,fullWidth:true,id:\"email\",label:\"Correo del usuario\",helperText:errorMessage,FormHelperTextProps:helperTextProps,value:email,onChange:function onChange(e){return setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,sm:12,children:/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",required:true,fullWidth:true,value:password,label:\"Contrase\\xF1a\",type:\"password\",id:\"password\",FormHelperTextProps:helperTextProps,helperText:errorMessagePass,autoComplete:\"current-password\",onChange:function onChange(e){return setPassword(e.target.value);}})})]}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",style:{margin:15,borderRadius:20},onClick:resetpass,disabled:statusdisable,startIcon:/*#__PURE__*/_jsx(SaveIcon,{}),children:\"Guardar\"}),/*#__PURE__*/_jsx(Button,{onClick:goHome,variant:\"outlined\",color:\"secondary\",style:{margin:15,borderRadius:20},children:\"Cancelar\"})]})})]})})})})});}export default ResetPassoword;","map":{"version":3,"sources":["D:/vinculacion/ami_app/src/pages/ResetPassword.js"],"names":["React","Grid","TextField","Button","Card","Container","useHistory","Swal","SaveIcon","validateEmail","values","re","test","ResetPassoword","useState","email","setEmail","password","setPassword","history","statusdisable","length","errorMessagePass","errorMessage","helperTextProps","error","goHome","push","resetpass","data","fetch","process","env","REACT_APP_BACKEND","method","body","JSON","stringify","headers","Accept","result","json","status","fire","icon","imageUrl","imageWidth","imageHeight","title","text","message","showConfirmButton","width","timer","background","then","state","dismiss","DismissReason","isDismissed","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","textAlign","minHeight","backgroundColor","e","target","value","margin","borderRadius"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"../css/singin.css\";\r\nimport { Grid, TextField, Button, Card, Container } from \"@material-ui/core\";\r\nimport { useHistory } from \"react-router\";\r\nimport Swal from \"sweetalert2\";\r\n\r\n//import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\n\r\nconst validateEmail = (values) => {\r\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  if (re.test(values)) {\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n};\r\n\r\nfunction ResetPassoword() {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  let history = useHistory();\r\n\r\n  const statusdisable =\r\n    email.length === 0 || password.length === 0 || validateEmail(email)\r\n      ? true\r\n      : false;\r\n\r\n  const errorMessagePass =\r\n    password.length === 0 ? \"La contraseña es obligatoria\" : \"\";\r\n\r\n  const errorMessage =\r\n    email.length === 0\r\n      ? \"El email es obligatorio\"\r\n      : validateEmail(email) === true\r\n      ? \"El email no es válido\"\r\n      : \"\";\r\n\r\n  const helperTextProps = {\r\n    error: true,\r\n  };\r\n\r\n  function goHome() {\r\n    history.push(\"/home\");\r\n  }\r\n\r\n  async function resetpass() {\r\n    let data = { email, password };\r\n    let result = await fetch(process.env.REACT_APP_BACKEND + \"/resetpass\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n      },\r\n    });\r\n    result = await result.json();\r\n    if (result.status === 200) {\r\n      Swal.fire({\r\n        // position: \"top-end\",\r\n        icon: \"success\",\r\n        imageUrl: \"/images/alertas/ok1.png\",\r\n        imageWidth: 150,\r\n        imageHeight: 150,\r\n        title: \"Felicitaciones\",\r\n        text: result.message,\r\n        showConfirmButton: false,\r\n        width: \"22rem\",\r\n        timer: 2500,\r\n        background: \"#E6E6FA\",\r\n        // background: '#ffff url(/images/alertas/ok1.png) center no-repeat ',\r\n      }).then((state) => {\r\n        if (state.dismiss === Swal.DismissReason.timer || state.isDismissed) {\r\n          history.push(\"/home\");\r\n        }\r\n      });\r\n    } else {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Error\",\r\n        imageUrl: \"/images/alertas/error.png\",\r\n        text: result.message,\r\n        showConfirmButton: false,\r\n        width: \"22rem\",\r\n        timer: 2500,\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{  \r\n      backgroundImage: \"url(../../images/menu/login.jpeg)\",\r\n      backgroundPosition: 'center',\r\n      backgroundSize: 'cover',\r\n      backgroundRepeat: 'no-repeat'\r\n    }}>\r\n      <Container>\r\n        <Grid container>\r\n          <Grid\r\n            style={{\r\n              textAlign: \"center\",\r\n              minHeight: \"100vh\",\r\n            }}\r\n            className=\"card\"\r\n            item\r\n            // xl={6}\r\n            // sm={6}\r\n            // xs={12}\r\n            // md={6}\r\n            container\r\n            spacing={0}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n            justify=\"center\"\r\n          >\r\n            <Card style={{ backgroundColor: \"#F9F9F9\" }}>\r\n              <h1>Actualizar Contraseña</h1>\r\n              <form>\r\n                <Container>\r\n                  <Grid container spacing={2}>\r\n                    <Grid item xs={12} md={12} sm={12}>\r\n                      <TextField\r\n                        name=\"Correo\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        fullWidth\r\n                        id=\"email\"\r\n                        label=\"Correo del usuario\"\r\n                        helperText={errorMessage}\r\n                        FormHelperTextProps={helperTextProps}\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12} md={12} sm={12}>\r\n                      <TextField\r\n                        variant=\"outlined\"\r\n                        required\r\n                        fullWidth\r\n                        value={password}\r\n                        label=\"Contraseña\"\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        FormHelperTextProps={helperTextProps}\r\n                        helperText={errorMessagePass}\r\n                        autoComplete=\"current-password\"\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                    style={{ margin: 15, borderRadius: 20 }}\r\n                    onClick={resetpass}\r\n                    disabled={statusdisable}\r\n                    startIcon={<SaveIcon />}\r\n                  >\r\n                    Guardar\r\n                  </Button>\r\n                  <Button\r\n                    onClick={goHome}\r\n                    variant=\"outlined\"\r\n                    color=\"secondary\"\r\n                    style={{ margin: 15, borderRadius: 20 }}\r\n                  >\r\n                    Cancelar\r\n                  </Button>\r\n                </Container>\r\n              </form>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ResetPassoword;\r\n"]},"metadata":{},"sourceType":"module"}